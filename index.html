<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Système de précommande de repas pour les professeurs">
    <title>Réservation Repas Professeurs</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Site Closed Overlay (19h-6h) -->
<div id="site-closed-overlay" class="hidden">
    <div class="closed-icon"><svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="10" width="12" height="10" rx="2"/><path d="M8 10 L8 6 C8 2 16 2 16 6 L16 10"/></svg></div>
    <h2>Site fermé</h2>
    <p>TeacherMeals est disponible du lundi au vendredi de <strong>6h00 à 19h00</strong>.</p>
    <div class="closed-time" id="closed-clock">--:--:--</div>
    <div class="closed-next" id="closed-next-open">Prochaine ouverture à 6h00</div>
</div>

    <header class="glass-header" role="banner">
        <div class="logo" aria-label="Logo TeacherMeals"><span>TeacherMeals</span></div>
        <nav role="navigation" aria-label="Navigation principale">
            <button class="nav-btn active" data-target="home">
                <span data-i18n="navHome">Accueil</span>
            </button>
            <button class="nav-btn" data-target="order" id="nav-order">
                <span data-i18n="navOrder">Commander</span>
            </button>
            <button class="nav-btn hidden" data-target="management" id="nav-admin">
                <span data-i18n="navManagement">Gestion</span>
            </button>
            <button class="nav-btn" data-target="signin" id="nav-signin">
                <span data-i18n="navSignin">Connexion</span>
            </button>
            <!-- Profile avatar button (logged in) -->
            <button class="nav-btn nav-profile hidden" id="nav-profile" data-target="profile">
                <div class="avatar-mini" id="header-avatar">?</div>
                <span id="header-username" data-i18n="navProfile">Profil</span>
            </button>
        </nav>
    </header>

    <main id="main-content" role="main">

        <!-- ===================== HOME ===================== -->
        <section id="home" class="page active">
            <div class="hero-section">
                <h1 data-i18n="homeTitle">Réservation Repas Professeurs</h1>
                <p class="hero-description" data-i18n="homeDescription">Précommandez vos repas quotidiens du lundi au vendredi. Frais, pratiques et prêts à récupérer.</p>
                <div class="status-strip" id="status-strip" role="status" aria-live="polite"></div>
            </div>
            <div class="steps-grid">
                <div class="card step-card"><div class="step-number">1</div><h3 data-i18n="step1Title">Se Connecter</h3><p data-i18n="step1Desc">Connectez-vous avec vos identifiants scolaires.</p></div>
                <div class="card step-card"><div class="step-number">2</div><h3 data-i18n="step2Title">Commander</h3><p data-i18n="step2Desc">Sélectionnez entrée, plat et dessert avant minuit.</p></div>
                <div class="card step-card"><div class="step-number">3</div><h3 data-i18n="step3Title">Récupérer</h3><p data-i18n="step3Desc">Récupérez votre repas à la cantine le jour suivant.</p></div>
            </div>
            <div class="faq-section">
                <h3 data-i18n="faqTitle">Questions Fréquentes</h3>
                <details class="faq-item"><summary data-i18n="faq1Q">Quand les commandes sont-elles remises à zéro ?</summary><p data-i18n="faq1A">Les commandes sont remises à zéro chaque soir à 00:00 CET.</p></details>
                <details class="faq-item"><summary data-i18n="faq2Q">Puis-je commander le weekend ?</summary><p data-i18n="faq2A">Non, le site est fermé samedi et dimanche. Retour lundi.</p></details>
                <details class="faq-item"><summary data-i18n="faq3Q">Jusqu'à quand puis-je modifier ma commande ?</summary><p data-i18n="faq3A">Jusqu'à minuit la veille du jour de retrait.</p></details>
            </div>
        </section>

        <!-- ===================== ORDER ===================== -->
        <section id="order" class="page">
            <h2 data-i18n="orderTitle">Commande du Jour</h2>
            <div id="weekend-banner" class="banner error hidden"><strong data-i18n="weekendBanner">Site fermé le weekend.</strong> <span data-i18n="statusReturnMonday">Retour lundi.</span></div>
            <div id="night-closed-banner" class="banner error hidden">
                <strong><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:6px"><rect x="5" y="11" width="14" height="10" rx="2"/><path d="M8 11V7a4 4 0 0 1 8 0v4"/></svg>Commandes fermées.</strong> Les commandes sont disponibles du lundi au vendredi de <strong>6h00 à 19h00</strong>. Revenez demain !
            </div>

            <!-- Order Form -->
            <div id="order-form-container">
                <form id="order-form" novalidate>
                    <fieldset class="form-section card">
                        <legend data-i18n="orderYourInfo">Vos informations</legend>
                        <div class="form-row">
                            <div class="input-group">
                                <label for="order-fname" data-i18n="orderFirstName">Prénom *</label>
                                <input type="text" id="order-fname" name="firstName" maxlength="100" required>
                                <span class="error-message" aria-live="polite"></span>
                            </div>
                            <div class="input-group">
                                <label for="order-lname" data-i18n="orderLastName">Nom *</label>
                                <input type="text" id="order-lname" name="lastName" maxlength="100" required>
                                <span class="error-message" aria-live="polite"></span>
                            </div>
                        </div>
                    </fieldset>

                    <div id="menu-container"></div>

                    <fieldset class="card section-extras">
                        <legend data-i18n="extrasTitle">Extras &amp; Accessoires</legend>
                        <div class="extras-grid">
                            <div class="extra-row">
                                <label class="checkbox-label">
                                    <input type="checkbox" name="extra" value="cutlery">
                                    <span class="checkmark"></span><span data-i18n="extraCutlery">Couverts</span>
                                </label>
                            </div>
                            <div class="extra-row">
                                <label class="checkbox-label">
                                    <input type="checkbox" name="extra" value="napkin">
                                    <span class="checkmark"></span><span data-i18n="extraNapkin">Serviette</span>
                                </label>
                            </div>
                            <div class="extra-row">
                                <label class="checkbox-label">
                                    <input type="checkbox" name="extra" value="sauces" id="extra-sauces-cb">
                                    <span class="checkmark"></span><span data-i18n="extraSauces">Sauces</span>
                                </label>
                                <input type="text" class="extra-inline-input" id="extra-sauces-input" placeholder="Précisez…" maxlength="120">
                            </div>
                            <div class="extra-row">
                                <label class="checkbox-label">
                                    <input type="checkbox" name="extra" value="allergies" id="extra-allergies-cb">
                                    <span class="checkmark"></span><span data-i18n="extraAllergies">Allergies</span>
                                </label>
                                <input type="text" class="extra-inline-input" id="extra-allergies-input" placeholder="Précisez…" maxlength="120">
                            </div>
                        </div>
                        <div class="input-group" style="margin-top:14px;margin-bottom:0">
                            <label for="order-notes" data-i18n="orderNotes">Notes / Autres</label>
                            <textarea id="order-notes" name="notes" data-i18n-placeholder="orderNotesPlaceholder" placeholder="Précisez ici vos allergies, préférences de sauces, ou toute autre demande spéciale…" maxlength="400" rows="2" class="auto-resize"></textarea>
                        </div>
                    </fieldset>

                    <!-- Cart bar -->
                    <div class="cart-bar" id="cart-bar">
                        <div class="cart-bar-info">
                            <span class="cart-bar-total">€<span id="total-price">0.00</span></span>
                            <span id="cart-count-badge">0 article</span>
                        </div>
                        <div style="display:flex;gap:8px;flex-wrap:wrap">
                            <button type="button" class="btn-danger" id="cancel-order-btn" data-i18n="cancel">Annuler</button>
                            <button type="submit" class="btn-primary" id="submit-order-btn" data-i18n="validateOrder">Valider la Commande →</button>
                        </div>
                    </div>
                    <span id="total-count" class="hidden">0</span>
                </form>
            </div>

            <!-- Email Confirmation Modal -->
            <div id="email-confirm-modal" class="modal-overlay hidden">
                <div class="modal-box">
                    <div class="modal-icon">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
                    </div>
                    <h3 data-i18n="modalConfirmTitle">Confirmer votre commande</h3>
                    <p data-i18n="modalConfirmEmailSent">Un email de confirmation va être envoyé à :</p>
                    <div class="confirm-email-display" id="confirm-email-addr">—</div>
                    <p class="modal-note" data-i18n="modalConfirmClickLink">Cliquez sur le lien dans l'email pour valider définitivement votre commande.</p>
                    <div class="modal-actions">
                        <button class="btn-primary full-width" id="modal-send-btn" data-i18n="modalSendEmail">Envoyer l'email de confirmation</button>
                        <button class="btn-secondary full-width" id="modal-cancel-btn" data-i18n="modalCancel">Annuler</button>
                    </div>
                </div>
            </div>

            <!-- Payment View -->
            <div id="payment-view" class="hidden">
                <div class="payment-layout">
                    <div class="payment-main">
                        <button class="btn-back" id="back-to-order">← <span data-i18n="backToOrder">Modifier la commande</span></button>
                        <h2 data-i18n="paymentTitle">Paiement</h2>
                        <div class="card payment-method-card">
                            <h3 data-i18n="paymentMethodTitle">Moyen de paiement</h3>
                            <div class="payment-methods">
                                <label class="payment-option active" data-method="card">
                                    <input type="radio" name="payment" value="card" checked>
                                    <div class="payment-option-inner">
                                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><rect x="1" y="4" width="22" height="16" rx="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg>
                                        <span data-i18n="paymentCard">Carte bancaire</span>
                                    </div>
                                </label>
                                <label class="payment-option" data-method="cash">
                                    <input type="radio" name="payment" value="cash">
                                    <div class="payment-option-inner">
                                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><rect x="2" y="6" width="20" height="12" rx="2"/><circle cx="12" cy="12" r="3"/><path d="M6 12h.01M18 12h.01"/></svg>
                                        <span data-i18n="paymentCash">Espèces</span>
                                    </div>
                                </label>
                                <label class="payment-option" data-method="badge">
                                    <input type="radio" name="payment" value="badge">
                                    <div class="payment-option-inner">
                                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><rect x="3" y="4" width="18" height="16" rx="2"/><path d="M7 8h.01M7 12h6M7 16h10"/></svg>
                                        <span data-i18n="paymentBadge">Badge école</span>
                                    </div>
                                </label>
                            </div>
                            <div id="card-fields" class="card-fields">
                                <div class="input-group">
                                    <label data-i18n="cardNumber">Numéro de carte</label>
                                    <input type="text" id="card-number" placeholder="4242 4242 4242 4242" maxlength="19" autocomplete="cc-number">
                                </div>
                                <div class="form-row">
                                    <div class="input-group"><label data-i18n="cardExpiry">Expiration</label><input type="text" id="card-expiry" placeholder="MM/AA" maxlength="5"></div>
                                    <div class="input-group"><label>CVV</label><input type="text" id="card-cvv" placeholder="•••" maxlength="4"></div>
                                </div>
                                <div class="input-group"><label data-i18n="cardName">Nom sur la carte</label><input type="text" id="card-name" placeholder="JEAN DUPONT"></div>
                                <p class="secure-note">
                                    <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                                    <span data-i18n="securePayment">Paiement sécurisé — SSL</span>
                                </p>
                            </div>
                        </div>
                        <button class="btn-primary full-width" id="confirm-payment-btn" style="margin-top:8px" data-i18n="confirmPaymentBtn">Confirmer le paiement</button>
                    </div>
                    <div class="payment-sidebar">
                        <div class="card recap-card">
                            <h3 data-i18n="recapTitle">Récapitulatif</h3>
                            <div id="payment-recap-items"></div>
                            <div class="recap-divider"></div>
                            <div class="recap-row"><span data-i18n="recapSubtotal">Sous-total</span><span id="recap-subtotal">€0.00</span></div>
                            <div class="recap-row"><span data-i18n="recapExtras">Extras</span><span id="recap-extras-label">—</span></div>
                            <div class="recap-row recap-total"><span data-i18n="recapTotal">Total</span><span id="recap-total">€0.00</span></div>
                            <div class="recap-row" style="margin-top:8px;font-size:.82rem;color:var(--text-muted)"><span data-i18n="recapPickupDate">Retrait le :</span><span id="recap-date">—</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Payment Success -->
            <div id="payment-success-view" class="hidden">
                <div class="success-card">
                    <div class="success-icon">
                        <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg>
                    </div>
                    <h2 data-i18n="successTitle">Commande confirmée !</h2>
                    <p data-i18n="successMessage">Votre repas sera prêt demain matin. Un email de confirmation a été envoyé.</p>
                    <div class="success-ref"><span data-i18n="successRef">Réf.</span> <strong id="order-ref">—</strong></div>
                    <button class="btn-primary" id="success-home-btn" data-i18n="successBackHome">Retour à l'accueil</button>
                </div>
            </div>
        </section>

        <!-- ===================== MANAGEMENT ===================== -->
        <section id="management" class="page">
            <div class="admin-header">
                <h2 data-i18n="adminTitle">Tableau de Bord Admin</h2>
                <div class="admin-tabs">
                    <button class="admin-tab active" data-tab="orders-tab">
                        <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"/><rect x="9" y="3" width="6" height="4" rx="1"/></svg>
                        <span data-i18n="adminTabOrders">Commandes</span>
                    </button>
                    <button class="admin-tab" data-tab="menu-tab">
                        <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg>
                        <span data-i18n="adminTabMenu">Gérer le menu</span>
                    </button>
                </div>
            </div>

            <!-- Orders Tab -->
            <div id="orders-tab" class="admin-tab-content active">
                <div class="admin-toolbar">
                    <input type="text" data-i18n-placeholder="adminSearchPlaceholder" placeholder="Rechercher un professeur…" id="admin-search" class="admin-search-input">
                    <div class="admin-toolbar-right">
                        <select id="admin-status-filter">
                            <option value="" data-i18n="allStatuses">Tous les statuts</option>
                            <option value="Confirmée" data-i18n="statusConfirmed">Confirmée</option>
                            <option value="Modifiée" data-i18n="statusModified">Modifiée</option>
                            <option value="Annulée" data-i18n="statusCancelled">Annulée</option>
                        </select>
                        <button class="btn-secondary" id="export-csv-btn">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                            <span data-i18n="exportCSV">Exporter CSV</span>
                        </button>
                    </div>
                </div>
                <div class="admin-stats-strip" id="admin-stats"></div>
                <div class="table-wrapper">
                    <table id="orders-table" class="admin-table">
                        <thead><tr>
                            <th data-i18n="thTeacher">Professeur</th><th data-i18n="thTime">Heure</th><th data-i18n="thStarter">Entrée</th>
                            <th data-i18n="thMain">Plat</th><th data-i18n="thDessert">Dessert</th><th data-i18n="thExtras">Extras</th>
                            <th data-i18n="thTotal">Total</th><th data-i18n="thStatut">Statut</th><th data-i18n="thActions">Actions</th>
                        </tr></thead>
                        <tbody id="orders-table-body"></tbody>
                        <tfoot id="orders-table-foot"></tfoot>
                    </table>
                </div>
                <p class="table-empty hidden" id="table-empty" data-i18n="noOrdersAdmin">Aucune commande pour le moment.</p>
            </div>

            <!-- Menu Tab -->
            <div id="menu-tab" class="admin-tab-content">
                <div class="menu-admin-layout">
                    <div class="card menu-form-card">
                        <h3 id="menu-form-title" data-i18n="menuFormTitle">Ajouter un plat</h3>
                        <form id="menu-admin-form" novalidate>
                            <input type="hidden" id="edit-item-id">
                            <div class="form-row">
                                <div class="input-group">
                                    <label for="item-name" data-i18n="dishName">Nom du plat *</label>
                                    <input type="text" id="item-name" placeholder="ex: Poulet Rôti" required maxlength="80">
                                </div>
                                <div class="input-group">
                                    <label for="item-category" data-i18n="dishCategory">Catégorie *</label>
                                    <select id="item-category" required>
                                        <option value="" data-i18n="chooseCategory">Choisir…</option>
                                        <option value="starter" data-i18n="categoryStarter">Entrée</option>
                                        <option value="main" data-i18n="categoryMain">Plat principal</option>
                                        <option value="dessert" data-i18n="categoryDessert">Dessert</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="input-group">
                                    <label for="item-price" data-i18n="priceLabel">Prix (€) *</label>
                                    <input type="number" id="item-price" min="0" max="99" step="0.10" placeholder="0.00" required>
                                </div>
                                <div class="input-group">
                                    <label for="item-limit" data-i18n="limitedStock">Stock limité (0 = illimité)</label>
                                    <input type="number" id="item-limit" min="0" max="999" step="1" placeholder="0">
                                </div>
                            </div>
                            <div class="tag-group">
                                <span class="tag-label" data-i18n="tagsLabel">Étiquettes</span>
                                <div class="tag-options">
                                    <label class="tag-checkbox"><input type="checkbox" name="tag" value="veg"> <span data-i18n="tagVegetarian">Végétarien</span></label>
                                    <label class="tag-checkbox"><input type="checkbox" name="tag" value="vegan"> <span data-i18n="tagVeganMenu">Végétalien</span></label>
                                    <label class="tag-checkbox"><input type="checkbox" name="tag" value="glutenfree"> <span data-i18n="tagGlutenFree">Sans Gluten</span></label>
                                    <label class="tag-checkbox"><input type="checkbox" name="tag" value="halal"> <span data-i18n="tagHalalMenu">Halal</span></label>
                                    <label class="tag-checkbox"><input type="checkbox" name="tag" value="spicy"> <span data-i18n="tagSpicyMenu">Épicé</span></label>
                                </div>
                            </div>
                            <div class="input-group">
                                <label class="checkbox-label" style="font-size:.9rem">
                                    <input type="checkbox" id="item-visible" checked>
                                    <span class="checkmark"></span>
                                    <span data-i18n="visibleInMenu">Visible dans le menu</span>
                                </label>
                            </div>
                            <div class="form-actions" style="justify-content:flex-start;gap:8px">
                                <button type="submit" class="btn-primary" id="menu-submit-btn" data-i18n="addTheDish">Ajouter le plat</button>
                                <button type="button" class="btn-secondary hidden" id="menu-cancel-edit-btn" data-i18n="cancelBtn">Annuler</button>
                            </div>
                        </form>
                    </div>
                    <div class="menu-list-panel">
                        <h3 data-i18n="currentMenu">Menu actuel</h3>
                        <div id="admin-menu-list"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ===================== CONTACT ===================== -->
        <section id="contact" class="page">
            <div id="contact-form-view">
                <h2 data-i18n="contactTitle">Contact Support</h2>
                <form id="contact-form">
                    <div class="input-group">
                        <label data-i18n="problemType">Type de problème</label>
                        <select required id="contact-type">
                            <option value="" data-i18n="selectOption">Sélectionner…</option>
                            <option value="Facturation" data-i18n="typeBilling">Facturation</option>
                            <option value="Problème de commande" data-i18n="typeOrderProblem">Problème de commande</option>
                            <option value="Problème de menu" data-i18n="typeMenuProblem">Problème de menu</option>
                            <option value="Compte" data-i18n="typeAccount">Compte</option>
                            <option value="Autre" data-i18n="typeOther">Autre</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label data-i18n="detailsLabel">Détails (20-2000 caractères)</label>
                        <textarea id="contact-msg" data-i18n-placeholder="detailsPlaceholder" minlength="20" maxlength="2000" required class="auto-resize" rows="3" placeholder="Décrivez votre problème en détail…"></textarea>
                    </div>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="contact-anon">
                            <span class="checkmark"></span>
                            <span data-i18n="submitAnonymously">Soumettre anonymement</span>
                        </label>
                    </div>
                    <button type="submit" class="btn-primary" data-i18n="sendBtn">Envoyer</button>
                </form>
            </div>
            <div id="contact-success-view" class="hidden" style="text-align:center;padding:40px 0">
                <h2 data-i18n="contactThanks">Merci pour votre retour</h2>
                <p data-i18n="contactReply">Nous vous répondrons dans les plus brefs délais.</p>
                <button class="btn-secondary" id="contact-return-home" data-i18n="backToHome">Retour à l'accueil</button>
            </div>
        </section>

        <!-- ===================== SIGN IN ===================== -->
        <section id="signin" class="page">
            <div class="signin-bg">
                <div class="auth-card">
                    <div class="auth-logo">
                        <svg width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                    </div>
                    <h2 id="auth-title">Bon retour !</h2>
                    <p class="auth-subtitle" id="auth-subtitle">Nous sommes heureux de vous revoir.</p>
                    <form id="auth-form" autocomplete="on">
                        <div id="register-fields" class="hidden">
                            <div class="input-group"><label for="reg-fname" data-i18n="firstName">Prénom</label><input type="text" id="reg-fname" placeholder="Jean" autocomplete="given-name"></div>
                            <div class="input-group"><label for="reg-lname" data-i18n="lastName">Nom</label><input type="text" id="reg-lname" placeholder="Dupont" autocomplete="family-name"></div>
                        </div>
                        <div class="input-group">
                            <label for="auth-email" data-i18n="emailAddress">Adresse e-mail</label>
                            <input type="email" id="auth-email" required placeholder="nom@ecole.fr" autocomplete="email">
                        </div>
                        <div class="input-group">
                            <div class="label-row">
                                <label for="auth-password" data-i18n="passwordSection">Mot de passe</label>
                                <button type="button" class="forgot-link" id="forgot-pw-btn" tabindex="-1" data-i18n="forgotPassword">Mot de passe oublié ?</button>
                            </div>
                            <div class="password-field-wrapper">
                                <input type="password" id="auth-password" required autocomplete="current-password">
                                <button type="button" class="toggle-password" id="togglePassword" tabindex="-1">
                                    <svg id="eye-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                                </button>
                            </div>
                        </div>
                        <div id="confirm-password-group" class="input-group hidden">
                            <label for="auth-confirm-password" data-i18n="confirmPassword">Confirmer le mot de passe</label>
                            <input type="password" id="auth-confirm-password" autocomplete="new-password">
                        </div>
                        <div id="remember-me-group" class="remember-row">
                            <label class="checkbox-label">
                                <input type="checkbox" id="remember-me">
                                <span class="checkmark"></span>
                                <span data-i18n="rememberMe">Se souvenir de moi</span>
                            </label>
                        </div>
                        <button type="submit" id="auth-submit-btn" class="btn-primary full-width">Se connecter</button>
                        <p class="auth-link">
                            <span id="auth-switch-text">Nouveau ici ?</span>
                            <a href="#" id="switch-auth-mode">Créer un compte</a>
                        </p>
                    </form>
                    <div class="auth-footer-links">
                        <a href="#" data-target="privacy" class="page-link" data-i18n="privacy">Confidentialité</a>
                        <span>·</span>
                        <a href="#" data-target="terms" class="page-link" data-i18n="terms">Conditions</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- ===================== PROFILE ===================== -->
        <section id="profile" class="page">
            <div class="profile-layout">

                <!-- Sidebar -->
                <aside class="profile-sidebar">
                    <div class="profile-avatar-large" id="profile-avatar-large">?</div>
                    <div class="profile-name-display" id="profile-name-display">—</div>
                    <div class="profile-email-display" id="profile-email-display">—</div>
                    <nav class="profile-nav">
                        <button class="profile-nav-btn active" data-section="section-account">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 3.6-7 8-7s8 3 8 7"/></svg>
                            <span data-i18n="profileNavAccount">Mon compte</span>
                        </button>
                        <button class="profile-nav-btn" data-section="section-active-orders">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                            <span>En cours</span>
                        </button>
                        <button class="profile-nav-btn" data-section="section-orders">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"/><rect x="9" y="3" width="6" height="4" rx="1"/></svg>
                            <span data-i18n="profileNavHistory">Historique</span>
                        </button>
                        <button class="profile-nav-btn" data-section="section-settings">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                            <span data-i18n="profileNavSettings">Paramètres</span>
                        </button>
                        <button class="profile-nav-btn profile-logout-btn" id="profile-logout-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                            <span data-i18n="profileNavLogout">Se déconnecter</span>
                        </button>
                    </nav>
                </aside>

                <!-- Main content -->
                <div class="profile-main">

                    <!-- Account Section -->
                    <div id="section-account" class="profile-section active">
                        <h2 data-i18n="myAccount">Mon Compte</h2>

                        <div class="card">
                            <h3 data-i18n="personalInfo">Informations personnelles</h3>
                            <form id="profile-info-form">
                                <div class="form-row">
                                    <div class="input-group">
                                        <label for="profile-fname" data-i18n="firstName">Prénom</label>
                                        <input type="text" id="profile-fname" maxlength="100">
                                    </div>
                                    <div class="input-group">
                                        <label for="profile-lname" data-i18n="lastName">Nom</label>
                                        <input type="text" id="profile-lname" maxlength="100">
                                    </div>
                                </div>
                                <div class="input-group">
                                    <label for="profile-email" data-i18n="emailAddress">Adresse e-mail</label>
                                    <input type="email" id="profile-email">
                                </div>
                                <div class="form-actions" style="justify-content:flex-start">
                                    <button type="submit" class="btn-primary" data-i18n="saveChanges">Enregistrer les modifications</button>
                                </div>
                            </form>
                        </div>

                        <div class="card">
                            <h3 data-i18n="passwordSection">Mot de passe</h3>
                            <form id="profile-pwd-form">
                                <div class="input-group">
                                    <label for="profile-current-pwd" data-i18n="currentPassword">Mot de passe actuel</label>
                                    <input type="password" id="profile-current-pwd" placeholder="••••••••">
                                </div>
                                <div class="input-group">
                                    <label for="profile-new-pwd" data-i18n="newPassword">Nouveau mot de passe</label>
                                    <input type="password" id="profile-new-pwd" placeholder="••••••••">
                                </div>
                                <div class="input-group">
                                    <label for="profile-confirm-pwd" data-i18n="confirmNewPassword">Confirmer le nouveau mot de passe</label>
                                    <input type="password" id="profile-confirm-pwd" placeholder="••••••••">
                                </div>
                                <div class="form-actions" style="justify-content:flex-start">
                                    <button type="submit" class="btn-primary" data-i18n="changePassword">Changer le mot de passe</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Active Orders Section -->
                    <div id="section-active-orders" class="profile-section">
                        <h2>Commandes en cours</h2>
                        <p class="section-note">Vos commandes en attente de livraison. Cliquez sur une commande pour confirmer la réception.</p>
                        <div id="profile-active-orders-list">
                            <p style="color:var(--text-muted);text-align:center;padding:32px 0">Aucune commande en cours.</p>
                        </div>
                    </div>

                    <!-- Orders History Section -->
                    <div id="section-orders" class="profile-section">
                        <h2 data-i18n="ordersHistory">Historique des commandes</h2>
                        <p class="section-note" data-i18n="ordersKept10Days">Les commandes livrées et annulées apparaissent ici.</p>
                        <div id="profile-orders-list">
                            <p style="color:var(--text-muted);text-align:center;padding:32px 0" data-i18n="noRecentOrders">Aucune commande récente.</p>
                        </div>
                    </div>

                    <!-- Settings Section -->
                    <div id="section-settings" class="profile-section">
                        <h2 data-i18n="profileNavSettings">Paramètres</h2>

                        <div class="card settings-group">
                            <h3 data-i18n="settingsDisplay">Affichage</h3>
                            <div class="settings-row">
                                <div>
                                    <div class="settings-row-label" data-i18n="darkMode">Mode sombre</div>
                                    <div class="settings-row-desc" data-i18n="darkModeDesc">Basculer entre le thème clair et sombre</div>
                                </div>
                                <label class="apple-switch">
                                    <input type="checkbox" id="settings-dark-toggle">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="settings-row">
                                <div>
                                    <div class="settings-row-label" data-i18n="interfaceLanguage">Langue de l'interface</div>
                                    <div class="settings-row-desc" data-i18n="interfaceLanguageDesc">Langue d'affichage du site</div>
                                </div>
                                <select id="settings-lang-select" class="settings-select">
                                    <option value="fr" data-i18n="french">Français</option>
                                    <option value="en" data-i18n="english">English</option>
                                </select>
                            </div>
                        </div>

                        <div class="card settings-group">
                            <h3 data-i18n="settingsNotifications">Notifications</h3>
                            <div class="settings-row">
                                <div>
                                    <div class="settings-row-label" data-i18n="emailConfirm">Confirmation par e-mail</div>
                                    <div class="settings-row-desc" data-i18n="emailConfirmDesc">Recevoir un email à chaque commande</div>
                                </div>
                                <label class="apple-switch">
                                    <input type="checkbox" id="settings-email-confirm" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="settings-row">
                                <div>
                                    <div class="settings-row-label" data-i18n="dailyReminder">Rappel quotidien</div>
                                    <div class="settings-row-desc" data-i18n="dailyReminderDesc">Rappel à 10h si aucune commande passée</div>
                                </div>
                                <label class="apple-switch">
                                    <input type="checkbox" id="settings-daily-reminder">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="card settings-group">
                            <h3 data-i18n="settingsOrders">Commandes</h3>
                            <div class="settings-row">
                                <div>
                                    <div class="settings-row-label" data-i18n="autoOrders">Commandes automatiques</div>
                                    <div class="settings-row-desc" data-i18n="autoOrdersDesc">Reconduire la commande précédente si aucune action</div>
                                </div>
                                <label class="apple-switch">
                                    <input type="checkbox" id="settings-auto-order">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="settings-row">
                                <div>
                                    <div class="settings-row-label" data-i18n="saveExtras">Sauvegarde des extras</div>
                                    <div class="settings-row-desc" data-i18n="saveExtrasDesc">Mémoriser mes accessoires préférés</div>
                                </div>
                                <label class="apple-switch">
                                    <input type="checkbox" id="settings-save-extras" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="card settings-group">
                            <h3 data-i18n="settingsPrivacy">Confidentialité &amp; Sécurité</h3>
                            <div class="settings-row">
                                <div>
                                    <div class="settings-row-label" data-i18n="historyVisibleAdmin">Historique visible par l'admin</div>
                                    <div class="settings-row-desc" data-i18n="historyVisibleAdminDesc">Autoriser les administrateurs à consulter vos commandes</div>
                                </div>
                                <label class="apple-switch">
                                    <input type="checkbox" id="settings-admin-visibility" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="settings-row settings-row-btn">
                                <div>
                                    <div class="settings-row-label" data-i18n="deleteAccount">Supprimer mon compte</div>
                                    <div class="settings-row-desc" data-i18n="deleteAccountDesc">Action irréversible — toutes vos données seront effacées</div>
                                </div>
                                <button class="btn-danger" id="delete-account-btn" style="padding:8px 16px;font-size:.85rem" data-i18n="deleteBtn">Supprimer</button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </section>

        <!-- ===================== HELP ===================== -->
        <section id="help" class="page">
            <div class="legal-page">
                <button class="btn-back" data-target="home">← <span data-i18n="backBtn">Retour</span></button>
                <h1>Centre d'aide</h1>
                <p class="legal-date">Trouvez rapidement des réponses à vos questions</p>

                <div class="help-contact-banner card">
                    <div>
                        <strong>Vous n'avez pas trouvé votre réponse ?</strong>
                        <p style="margin:4px 0 0;font-size:.88rem;color:var(--text-muted)">Notre équipe est disponible du lundi au vendredi.</p>
                    </div>
                    <button class="btn-primary" data-target="contact" style="white-space:nowrap">
                        <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:6px"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                        Nous contacter
                    </button>
                </div>

                <h3 style="margin:28px 0 12px" >Questions fréquentes</h3>

                <details class="faq-item card"><summary>Comment passer une commande ?</summary><p>Connectez-vous à votre compte, rendez-vous sur la page <strong>Commander</strong>, sélectionnez vos plats (entrée, plat, dessert), puis cliquez sur <em>Valider la commande</em>. Vous recevrez un email de confirmation.</p></details>

                <details class="faq-item card"><summary>Quels sont les horaires du service ?</summary><p>Le service est disponible du <strong>lundi au vendredi de 6h00 à 19h00</strong>. Les commandes passées avant 19h sont préparées pour le lendemain. Le site est fermé le weekend.</p></details>

                <details class="faq-item card"><summary>Puis-je modifier ou annuler ma commande ?</summary><p>Oui, depuis la section <strong>Profil → En cours</strong>, vous pouvez modifier ou annuler une commande jusqu'à 24h après sa validation. Passé ce délai, la commande est en préparation.</p></details>

                <details class="faq-item card"><summary>Comment confirmer la réception de ma commande ?</summary><p>Lorsque vous récupérez votre repas à la cantine, ouvrez l'application, allez dans <strong>Profil → En cours</strong>, cliquez sur votre commande et utilisez le <em>slider de confirmation</em>. Montrez l'écran à la personne qui vous remet le repas.</p></details>

                <details class="faq-item card"><summary>Je n'ai pas reçu l'email de confirmation</summary><p>Vérifiez votre dossier spam. Si l'email n'y est pas, votre commande est quand même enregistrée — vous pouvez la retrouver dans <strong>Profil → En cours</strong>. En cas de doute, contactez le support.</p></details>

                <details class="faq-item card"><summary>J'ai oublié mon mot de passe</summary><p>Sur la page de connexion, cliquez sur <em>Mot de passe oublié ?</em> et entrez votre adresse email. Vous recevrez un lien de réinitialisation dans les minutes qui suivent.</p></details>

                <details class="faq-item card"><summary>Quels moyens de paiement sont acceptés ?</summary><p>Trois moyens de paiement sont disponibles : <strong>Carte bancaire</strong>, <strong>Espèces</strong> (à remettre à la cantine), et <strong>Badge école</strong> (débit sur votre compte établissement).</p></details>

                <details class="faq-item card"><summary>Les commandes annulées sont-elles remboursées ?</summary><p>Si vous payez par badge école, le montant est simplement non débité. Pour les autres moyens de paiement, contactez l'administration via la page Contact.</p></details>

                <details class="faq-item card"><summary>Comment supprimer mon compte ?</summary><p>Rendez-vous dans <strong>Profil → Paramètres</strong>, section <em>Confidentialité & Sécurité</em>, puis cliquez sur <em>Supprimer mon compte</em>. Cette action est irréversible.</p></details>
            </div>
        </section>

        <!-- ===================== PRIVACY ===================== -->
        <section id="privacy" class="page">
            <div class="legal-page">
                <button class="btn-back" data-target="home">← <span data-i18n="backBtn">Retour</span></button>
                <h1 data-i18n="privacyTitle">Politique de Confidentialité</h1>
                <p class="legal-date" data-i18n="lastUpdate">Dernière mise à jour : février 2026</p>
                <div class="card"><h3 data-i18n="privacy1Title">1. Données collectées</h3><p data-i18n="privacy1Content">Nous collectons uniquement les informations nécessaires : nom, prénom, adresse e-mail et préférences de commande. Aucune donnée bancaire n'est stockée sur nos serveurs.</p></div>
                <div class="card"><h3 data-i18n="privacy2Title">2. Utilisation des données</h3><p data-i18n="privacy2Content">Vos données sont utilisées exclusivement pour gérer vos réservations de repas et améliorer le service. Elles ne sont ni vendues ni partagées avec des tiers à des fins commerciales.</p></div>
                <div class="card"><h3 data-i18n="privacy3Title">3. Conservation</h3><p data-i18n="privacy3Content">Les données de commande sont conservées pendant 12 mois à compter de la dernière activité. Vous pouvez demander la suppression de votre compte à tout moment en contactant le support.</p></div>
                <div class="card"><h3 data-i18n="privacy4Title">4. Vos droits</h3><p data-i18n="privacy4Content">Conformément au RGPD, vous disposez d'un droit d'accès, de rectification et de suppression de vos données. Pour exercer ces droits, contactez-nous via la page Contact.</p></div>
                <div class="card"><h3 data-i18n="privacy5Title">5. Cookies</h3><p data-i18n="privacy5Content">Nous utilisons uniquement des cookies essentiels au fonctionnement du service (session, préférences d'affichage). Aucun cookie publicitaire ou de traçage n'est utilisé.</p></div>
            </div>
        </section>

        <!-- ===================== TERMS ===================== -->
        <section id="terms" class="page">
            <div class="legal-page">
                <button class="btn-back" data-target="home">← <span data-i18n="backBtn">Retour</span></button>
                <h1 data-i18n="termsTitle">Conditions d'Utilisation</h1>
                <p class="legal-date" data-i18n="lastUpdate">Dernière mise à jour : février 2026</p>
                <div class="card"><h3 data-i18n="terms1Title">1. Accès au service</h3><p data-i18n="terms1Content">Le service TeacherMeals est réservé au personnel enseignant de l'établissement. L'accès est conditionné à la possession d'identifiants scolaires valides.</p></div>
                <div class="card"><h3 data-i18n="terms2Title">2. Commandes</h3><p data-i18n="terms2Content">Les commandes doivent être passées entre 6h et 19h, du lundi au vendredi. Maximum 3 articles par catégorie. Le service est indisponible les weekends, jours fériés, et en dehors des horaires d'ouverture. Toute commande validée engage l'utilisateur.</p></div>
                <div class="card"><h3 data-i18n="terms3Title">3. Annulation</h3><p data-i18n="terms3Content">Une commande peut être modifiée ou annulée dans les <strong>24 heures</strong> suivant sa validation, depuis l'onglet <strong>Historique</strong> de votre profil. Passé ce délai, le repas sera préparé et facturé normalement.</p></div>
                <div class="card"><h3 data-i18n="terms4Title">4. Comportement</h3><p data-i18n="terms4Content">Les utilisateurs s'engagent à utiliser le service de bonne foi et à ne pas tenter d'en perturber le fonctionnement. Tout abus pourra entraîner la suspension du compte.</p></div>
                <div class="card"><h3 data-i18n="terms5Title">5. Responsabilité</h3><p data-i18n="terms5Content">L'établissement ne saurait être tenu responsable des interruptions de service dues à des raisons techniques ou de force majeure. En cas de problème, contactez le support via la page Contact.</p></div>
            </div>
        </section>

        <!-- ===================== FORGOT PASSWORD ===================== -->
        <section id="forgot-password" class="page">
            <div class="forgot-card">
                <div class="forgot-icon">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
                </div>
                <!-- Formulaire -->
                <div id="forgot-form-view" class="forgot-form">
                    <h2>Mot de passe oublié ?</h2>
                    <p>Entrez votre adresse e-mail. Si un compte existe, vous recevrez un lien de réinitialisation.</p>
                    <form id="forgot-form" autocomplete="off">
                        <div class="input-group" style="text-align:left">
                            <label for="forgot-email">Adresse e-mail</label>
                            <input type="email" id="forgot-email" placeholder="nom@ecole.fr" required>
                        </div>
                        <button type="submit" class="btn-primary full-width" id="forgot-submit-btn">Envoyer le lien</button>
                    </form>
                    <p style="margin-top:16px;font-size:0.83rem;color:var(--text-muted)">
                        <a href="#" id="back-to-signin-forgot" style="color:#5865f2;font-weight:600;text-decoration:none">← Retour à la connexion</a>
                    </p>
                </div>
                <!-- Succès simulé -->
                <div id="forgot-success-view" class="hidden" style="text-align:center">
                    <div style="font-size:2.5rem;margin-bottom:12px"><svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M22 6l-10 7-10-7"/></svg></div>
                    <h2 style="margin-bottom:10px">Email envoyé !</h2>
                    <p>Si l'adresse <strong id="forgot-email-shown">—</strong> est associée à un compte, vous recevrez un lien dans quelques instants.</p>
                    <p style="font-size:0.82rem;color:var(--text-muted);margin-top:8px">Pensez à vérifier vos spams.</p>
                    <button class="btn-secondary" style="margin-top:20px" id="forgot-back-btn">Retour à la connexion</button>
                </div>
            </div>
        </section>

    </main>

    <!-- ===================== RESET PASSWORD PAGE ===================== -->
    <div id="reset-pw-page" class="hidden">
        <div class="reset-pw-card">
            <div class="reset-pw-icon">
                <svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
            </div>
            <div id="reset-pw-form-view">
                <h2>Mot de passe oublié</h2>
                <p style="font-size:.9rem;margin-bottom:20px">Entrez votre adresse e-mail. Nous vous enverrons un lien pour réinitialiser votre mot de passe.</p>
                <form id="reset-pw-form">
                    <div class="input-group" style="text-align:left">
                        <label for="reset-pw-email">Adresse e-mail</label>
                        <input type="email" id="reset-pw-email" placeholder="nom@ecole.fr" required>
                    </div>
                    <button type="submit" class="btn-primary full-width" id="reset-pw-submit-btn">Envoyer le lien</button>
                </form>
                <button class="btn-back" id="reset-pw-back" style="margin-top:16px">← Retour à la connexion</button>
            </div>
            <div id="reset-pw-success-view" class="hidden">
                <div style="display:flex;align-items:center;justify-content:center;margin-bottom:12px"><svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M22 6l-10 7-10-7"/></svg></div>
                <h2>Email envoyé !</h2>
                <p id="reset-pw-sent-addr" style="font-size:.9rem;color:var(--text-muted);margin-bottom:20px">—</p>
                <p style="font-size:.88rem">Consultez votre boîte mail et cliquez sur le lien pour réinitialiser votre mot de passe. Vérifiez aussi vos spams.</p>
                <button class="btn-secondary full-width" id="reset-pw-done-btn" style="margin-top:20px">Retour à la connexion</button>
            </div>
        </div>
    </div>

    <!-- ===================== SITE CLOSED OVERLAY ===================== -->
    <div id="site-closed-overlay" class="site-closed-overlay hidden">
        <div class="site-closed-icon"><svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="10" width="12" height="10" rx="2"/><path d="M8 10 L8 6 C8 2 16 2 16 6 L16 10"/></svg></div>
        <h2 id="closed-title">Site fermé</h2>
        <p id="closed-subtitle">Le service est disponible de 6h à 19h.</p>
        <p id="closed-next" style="margin-top:8px;font-size:.88rem;color:var(--text-muted)"></p>
    </div>

    <!-- Modal modification / annulation de commande -->
    <div id="edit-order-modal" class="modal-overlay hidden">
        <div class="modal-box" style="max-width:480px;text-align:left">
            <h3 id="edit-order-modal-title">Modifier la commande</h3>
            <p style="font-size:0.88rem;color:var(--text-muted);margin-bottom:16px">Réf. <span id="edit-order-ref-display" style="font-family:monospace;font-weight:700">—</span></p>

            <div id="edit-order-menu-container" style="max-height:300px;overflow-y:auto;margin-bottom:14px"></div>

            <div class="input-group">
                <label>Notes</label>
                <textarea id="edit-order-notes" rows="2" class="auto-resize" maxlength="400" placeholder="Notes, allergies…"></textarea>
            </div>

            <div class="modal-actions" style="flex-direction:row;gap:8px;justify-content:flex-end;margin-top:16px">
                <button class="btn-secondary" id="edit-order-cancel-btn">Annuler</button>
                <button class="btn-danger" id="edit-order-delete-btn">Annuler la commande</button>
                <button class="btn-primary" id="edit-order-save-btn">Enregistrer</button>
            </div>
        </div>
    </div>

    <!-- Modal slider de livraison (style TGTG) -->
    <div id="delivery-modal" class="modal-overlay hidden">
        <div class="modal-box delivery-modal-box">
            <button class="delivery-modal-close" id="delivery-modal-close">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
            </button>
            <div class="delivery-icon">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/><path d="M6 11h.01M18 11h.01"/></svg>
            </div>
            <h3 class="delivery-modal-title">Confirmer la réception</h3>
            <p class="delivery-modal-subtitle" id="delivery-modal-order-ref">Réf. —</p>

            <!-- Slider TGTG -->
            <div class="delivery-slider-track" id="delivery-slider-track">
                <div class="delivery-slider-fill" id="delivery-slider-fill"></div>
                <div class="delivery-slider-label" id="delivery-slider-label">Glissez pour confirmer →</div>
                <div class="delivery-slider-thumb" id="delivery-slider-thumb">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="9 18 15 12 9 6"/></svg>
                </div>
            </div>

            <div id="delivery-success" class="delivery-success hidden">
                <div class="delivery-success-icon">
                    <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg>
                </div>
                <p>Commande livrée ! Bon appétit</p>
            </div>
        </div>
    </div>

    <!-- Settings FAB -->
    <div class="settings-container">
        <div id="settings-popover" class="settings-popover">
            <div class="popover-header" data-i18n="quickSettings">Paramètres rapides</div>
            <ul class="settings-list">
                <li class="setting-btn hidden" data-target="profile" id="settings-profile-btn">
                    <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 3.6-7 8-7s8 3 8 7"/></svg>
                    <span data-i18n="navProfile">Profil</span>
                </li>

                <li class="setting-btn hidden" id="settings-prefs-btn" data-target="profile" data-section="section-settings">
                    <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                    <span data-i18n="profileNavSettings">Paramètres</span>
                </li>

                <li class="has-submenu" id="pref-link">
                    <span data-i18n="help">Aide</span>
                    <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="9 18 15 12 9 6"/></svg>
                    <ul class="sous-menu">
                        <li data-target="help" class="page-link" data-i18n="helpCenter">Centre d'aide</li>
                        <li data-target="contact" class="page-link" data-i18n="navContact">Contact</li>
                        <li data-target="privacy" class="page-link" data-i18n="privacy">Confidentialité</li>
                    </ul>
                </li>

                <li class="has-submenu" id="lang-menu">
                    <span id="lang-label">Langue : FR</span>
                    <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="9 18 15 12 9 6"/></svg>
                    <ul class="sous-menu">
                        <li data-lang="fr" class="lang-option active-lang">FR — Français</li>
                        <li data-lang="en" class="lang-option">EN — English</li>
                    </ul>
                </li>

                <li class="darkmode-row">
                    <span data-i18n="darkMode">Mode sombre</span>
                    <label class="apple-switch">
                        <input type="checkbox" id="dark-mode-toggle">
                        <span class="slider"></span>
                    </label>
                </li>

                <li data-target="signin" class="setting-btn" id="settings-signin">
                    <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/><polyline points="10 17 15 12 10 7"/><line x1="15" y1="12" x2="3" y2="12"/></svg>
                    <span data-i18n="signIn">Connexion</span>
                </li>
                <li class="setting-btn hidden" id="settings-logout">
                    <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                    <span data-i18n="signOut">Déconnexion</span>
                </li>
            </ul>
        </div>
        <button id="settings-fab" class="settings-fab" data-i18n-aria="settingsAria" aria-label="Paramètres">
            <svg width="22" height="22" viewBox="0 0 24 24"><path fill="currentColor" d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11.03L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.47,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.53,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11.03C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.53,18.67 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.47,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/></svg>
        </button>
    </div>

    <footer role="contentinfo">
        <p>&copy; 2026 TeacherMeals.
           <a href="#" data-target="privacy" class="page-link" data-i18n="privacy">Confidentialité</a> &bull;
           <a href="#" data-target="terms" class="page-link" data-i18n="terms">Conditions</a>
        </p>
    </footer>

    <div id="toast-container" aria-live="assertive" aria-atomic="false"></div>

    <!-- Mobile bottom navigation bar -->
    <nav class="mobile-nav" aria-label="Navigation mobile">
        <button class="mobile-nav-btn active" data-target="home" id="mob-nav-home">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
            Accueil
        </button>
        <button class="mobile-nav-btn" data-target="order" id="mob-nav-order">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
            Commander
        </button>
        <button class="mobile-nav-btn hidden" data-target="management" id="mob-nav-admin">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
            Gestion
        </button>
        <button class="mobile-nav-btn" data-target="signin" id="mob-nav-signin">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/><polyline points="10 17 15 12 10 7"/><line x1="15" y1="12" x2="3" y2="12"/></svg>
            Connexion
        </button>
        <button class="mobile-nav-btn hidden" data-target="profile" id="mob-nav-profile">
            <div class="avatar-mini" id="mob-header-avatar" style="width:22px;height:22px;font-size:0.65rem">?</div>
            Profil
        </button>
    </nav>

    <script type="module" src="script.js"></script>
</body>
</html>
